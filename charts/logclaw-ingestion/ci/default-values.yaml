# CI test values for logclaw-ingestion chart
# Provides all required global.* values that would normally come from the umbrella chart.
# Suitable for `helm lint`, `helm template`, and local `kind` development.

# Use Deployment mode (PrivateLink receiver) — the recommended production mode
mode: "deployment"

# Single replica for CI — avoids scheduling constraints in test clusters
replicaCount: 1

# Disable autoscaling so replicaCount above is used directly
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 1

# ── Global values (normally injected by umbrella chart) ────────────────────────
global:
  tenantId: "dev-local"
  tier: "standard"
  storageClass: "standard"
  kafkaBrokers: "kafka.default.svc.cluster.local:9092"
  kafkaTopics:
    rawLogs: "raw-logs"
  topologyKey: "kubernetes.io/hostname"
  ingestionDomain: "ingestion.logclaw.local"
  tls:
    enabled: false
    clusterIssuer: "logclaw-selfsigned"
    issuer: ""
  monitoring:
    enabled: false

# Reduce resource requests for CI resource-constrained environments
resources:
  requests:
    cpu: "100m"
    memory: "128Mi"
  limits:
    cpu: "500m"
    memory: "512Mi"

# Single-replica PDB — avoids blocking rollouts in CI
podDisruptionBudget:
  minAvailable: 1

# TLS disabled in CI (no cert-manager)
sources:
  http:
    enabled: true
    port: 8080
    tls:
      enabled: false
      certSecretName: "logclaw-ingestion-tls-ci"

# Fluentd disabled in CI
fluentd:
  enabled: false

# No topology spread in CI (single-node clusters)
topologySpreadConstraints: []
